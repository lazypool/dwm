# 基础
backend = "glx";
vsync = true;

# 窗口检测
detect-client-leader = true;
detect-client-opacity = true;
detect-transient = true;
detect-rounded-corners = true;

# 阴影
shadow = false;
shadow-radius = 12;
shadow-offset-x = -15;
shadow-offset-y = -15;
shadow-opacity = 0.0;

# 圆角
corner-radius = 10.0;

# 淡入淡出
fading = true;
fade-in-step = 0.02;
fade-out-step = 0.02;

# 模糊
blur-method = "dual_kawase";
blur-strength = 3;
blur-kern = "3x3box";

# 窗口规则
rules = (
# 基础透明度
	{ match = "!focused && !_NET_WM_WINDOW_OPACITY", opacity = 0.65 },
	{ match = "focused || wmwin || override_redirect", opacity = 0.95 },
	{ match = "fullscreen", opacity = 1.00, corner-radius = 0.0 },

# 应用窗口配置
	{ match = "class_g = 'dwm'", opacity = 1.00, corner-radius = 12.0, fade = false },
	{ match = "class_g = 'fcitx'", opacity = 1.00, corner-radius = 0.0, fade = false },
	{ match = "class_g = 'obs'", opacity = 1.00, corner-radius = 0.0, fade = false },
	{ match = "class_g = 'Gimp'", opacity = 1.00, corner-radius = 0.0, fade = false },
	{ match = "class_g = 'Rofi'", opacity = 1.00, fade = false },

# 窗口类型设置
	{ match = "window_type = 'dock'", opacity = 1.00, blur-background = false },
	{ match = "window_type = 'desktop'", opacity = 1.00, blur-background = false },
)

# 动画
animations = (
# 关闭及隐藏窗口
	{ triggers = ["close", "hide"];
		opacity = {
			curve = "linear";
			duration = 0.4;
			start = "window-raw-opacity-before";
			end = 0;
		};
		shadow-opacity = "opacity";
		scale-x = {
			curve = "cubic-bezier(0.25,0.8,0.25,1)";
			duration = 0.6;
			start = 1;
			end = 0;
		};
		scale-y = "scale-x";
		shadow-scale-x = "scale-x";
		shadow-scale-y = "scale-y";
	},

# 开启及展示窗口
	{	triggers = ["open", "show"];
		opacity = {
			curve = "cubic-bezier(0.25,0.8,0.25,1)";
			duration = 0.8;
			start = 0;
			end = "window-raw-opacity";
		};
		shadow-opacity = "opacity";
		offset-x = "(1 - scale-x) / 2 * window-width";
		offset-y = "(1 - scale-y) / 2 * window-height";
		scale-x = {
			curve = "cubic-bezier(0.25,0.8,0.25,1)";
			duration = 0.8;
			start = 0;
			end = 1;
		};
		scale-y = "scale-x";
		shadow-offset-x = "offset-x";
		shadow-offset-y = "offset-y";
		shadow-scale-x = "scale-x";
		shadow-scale-y = "scale-y";
	},

# 窗口缩放及移动
	{	triggers = ["geometry"];
		scale-x = {
			curve = "cubic-bezier(0.25,0.8,0.25,1)";
			duration = 0.8;
			start = "window-width-before / window-width";
			end = 1;
		};
		scale-y = {
			curve = "cubic-bezier(0.25,0.8,0.25,1)";
			duration = 0.8;
			start = "window-height-before / window-height";
			end = 1;
		};
		offset-x = {
			curve = "cubic-bezier(0.25,0.8,0.25,1)";
			duration = 0.8;
			start = "window-x-before - window-x";
			end = 1;
		};
		offset-y = {
			curve = "cubic-bezier(0.25,0.8,0.25,1)";
			duration = 0.8;
			start = "window-y-before - window-y";
			end = 1;
		};
		shadow-offset-x = "offset-x";
		shadow-offset-y = "offset-y";
		shadow-scale-x = "scale-x";
		shadow-scale-y = "scale-y";
	},
)
